{"ast":null,"code":"import { createElementVNode as _createElementVNode, createCommentVNode as _createCommentVNode, vModelText as _vModelText, withDirectives as _withDirectives, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, vModelSelect as _vModelSelect } from \"vue\";\nconst _hoisted_1 = {\n  class: \"py-8\",\n  style: {\n    \"margin-left\": \"30px\"\n  }\n};\nconst _hoisted_2 = {\n  class: \"p-8\"\n};\nconst _hoisted_3 = {\n  class: \"mb-6 flex flex-wrap gap-4\"\n};\nconst _hoisted_4 = [\"value\"];\nconst _hoisted_5 = {\n  key: 0,\n  class: \"mb-8 grid grid-cols-1 md:grid-cols-2 gap-8\"\n};\nconst _hoisted_6 = {\n  ref: \"departmentChart\"\n};\nconst _hoisted_7 = {\n  ref: \"salaryChart\"\n};\nconst _hoisted_8 = {\n  key: 1,\n  class: \"text-gray-500\"\n};\nconst _hoisted_9 = {\n  key: 2,\n  class: \"text-red-500 mt-4\"\n};\nconst _hoisted_10 = {\n  key: 3,\n  class: \"text-gray-500\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_cache[4] || (_cache[4] = _createElementVNode(\"h1\", {\n    class: \"text-2xl font-semibold text-gray-900 text-left\"\n  }, \"Good afternoon, Tom\", -1 /* CACHED */)), _createElementVNode(\"div\", _hoisted_2, [_cache[3] || (_cache[3] = _createElementVNode(\"h1\", {\n    class: \"text-2xl font-semibold text-gray-900 mb-6\"\n  }, \"Employee Details Dashboard\", -1 /* CACHED */)), _createCommentVNode(\" Filter Section \"), _createElementVNode(\"div\", _hoisted_3, [_withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.search = $event),\n    type: \"text\",\n    placeholder: \"Search by name\",\n    class: \"border px-3 py-2 rounded shadow-sm\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.search]]), _withDirectives(_createElementVNode(\"select\", {\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.department = $event),\n    class: \"border px-3 py-2 rounded shadow-sm\"\n  }, [_cache[2] || (_cache[2] = _createElementVNode(\"option\", {\n    value: \"\"\n  }, \"All Departments\", -1 /* CACHED */)), (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($options.departments, dept => {\n    return _openBlock(), _createElementBlock(\"option\", {\n      key: dept,\n      value: dept\n    }, _toDisplayString(dept), 9 /* TEXT, PROPS */, _hoisted_4);\n  }), 128 /* KEYED_FRAGMENT */))], 512 /* NEED_PATCH */), [[_vModelSelect, $data.department]])]), _createCommentVNode(\" Graph Section \"), !$data.loading && $options.filteredEmployees.length ? (_openBlock(), _createElementBlock(\"div\", _hoisted_5, [_createElementVNode(\"div\", null, [_createElementVNode(\"canvas\", _hoisted_6, null, 512 /* NEED_PATCH */)]), _createElementVNode(\"div\", null, [_createElementVNode(\"canvas\", _hoisted_7, null, 512 /* NEED_PATCH */)])])) : _createCommentVNode(\"v-if\", true), $data.loading ? (_openBlock(), _createElementBlock(\"div\", _hoisted_8, \"Loading...\")) : _createCommentVNode(\"v-if\", true), $data.error ? (_openBlock(), _createElementBlock(\"div\", _hoisted_9, _toDisplayString($data.error), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true), !$data.loading && !$options.filteredEmployees.length ? (_openBlock(), _createElementBlock(\"div\", _hoisted_10, \"No data to display.\")) : _createCommentVNode(\"v-if\", true)])]);\n}","map":{"version":3,"names":["class","style","ref","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_createCommentVNode","_hoisted_3","$data","search","$event","type","placeholder","department","value","_Fragment","_renderList","$options","departments","dept","key","_hoisted_4","loading","filteredEmployees","length","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","error","_hoisted_9","_toDisplayString","_hoisted_10"],"sources":["C:\\Users\\Student\\Documents\\Exercises\\Workshop\\Vue\\hr_system\\src\\views\\DashboardView.vue"],"sourcesContent":["<template>\n  <div class=\"py-8\" style=\"margin-left:30px;\">\n    <h1 class=\"text-2xl font-semibold text-gray-900 text-left\">Good afternoon, Tom</h1>\n    <div class=\"p-8\">\n      <h1 class=\"text-2xl font-semibold text-gray-900 mb-6\">Employee Details Dashboard</h1>\n\n      <!-- Filter Section -->\n      <div class=\"mb-6 flex flex-wrap gap-4\">\n        <input\n          v-model=\"search\"\n          type=\"text\"\n          placeholder=\"Search by name\"\n          class=\"border px-3 py-2 rounded shadow-sm\"\n        />\n        <select v-model=\"department\" class=\"border px-3 py-2 rounded shadow-sm\">\n          <option value=\"\">All Departments</option>\n          <option v-for=\"dept in departments\" :key=\"dept\" :value=\"dept\">{{ dept }}</option>\n        </select>\n      </div>\n\n      <!-- Graph Section -->\n      <div v-if=\"!loading && filteredEmployees.length\" class=\"mb-8 grid grid-cols-1 md:grid-cols-2 gap-8\">\n        <div>\n          <canvas ref=\"departmentChart\"></canvas>\n        </div>\n        <div>\n          <canvas ref=\"salaryChart\"></canvas>\n        </div>\n      </div>\n\n      <div v-if=\"loading\" class=\"text-gray-500\">Loading...</div>\n      <div v-if=\"error\" class=\"text-red-500 mt-4\">{{ error }}</div>\n      <div v-if=\"!loading && !filteredEmployees.length\" class=\"text-gray-500\">No data to display.</div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport Chart from 'chart.js/auto';\n\nexport default {\n  name: \"EmployeeDashboard\",\n  data() {\n    return {\n      employees: [],\n      loading: true,\n      error: null,\n      search: \"\",\n      department: \"\",\n      departmentChart: null,\n      salaryChart: null\n    };\n  },\n  computed: {\n    filteredEmployees() {\n      return this.employees.filter(emp => {\n        const matchesName = emp.name.toLowerCase().includes(this.search.toLowerCase());\n        const matchesDept = this.department ? emp.department === this.department : true;\n        return matchesName && matchesDept;\n      });\n    },\n    departments() {\n      const depts = this.employees.map(e => e.department).filter(Boolean);\n      return [...new Set(depts)];\n    }\n  },\n  watch: {\n    filteredEmployees() {\n      // Only render charts if not loading and there is data\n      if (!this.loading && this.filteredEmployees.length) {\n        this.$nextTick(() => {\n          this.renderCharts();\n        });\n      } else {\n        // Destroy charts if no data\n        if (this.departmentChart) {\n          this.departmentChart.destroy();\n          this.departmentChart = null;\n        }\n        if (this.salaryChart) {\n          this.salaryChart.destroy();\n          this.salaryChart = null;\n        }\n      }\n    }\n  },\n  mounted() {\n    fetch(\"https://zakariad007.github.io/employee/employee_info.json\")\n      .then(res => res.json())\n      .then(data => {\n        this.employees = data.employeeInformation;\n        this.loading = false;\n        this.$nextTick(() => {\n          if (this.filteredEmployees.length) {\n            this.renderCharts();\n          }\n        });\n      })\n      .catch(() => {\n        this.error = \"Failed to load employee data.\";\n        this.loading = false;\n      });\n  },\n  methods: {\n    renderCharts() {\n      // Destroy previous charts if they exist\n      if (this.departmentChart) {\n        this.departmentChart.destroy();\n        this.departmentChart = null;\n      }\n      if (this.salaryChart) {\n        this.salaryChart.destroy();\n        this.salaryChart = null;\n      }\n\n      // Use refs instead of getElementById\n      const deptCtx = this.$refs.departmentChart;\n      const salaryCtx = this.$refs.salaryChart;\n\n      // Only render if refs exist and there is data\n      if (deptCtx && this.filteredEmployees.length) {\n        const deptCounts = {};\n        this.filteredEmployees.forEach(emp => {\n          if (emp.department) {\n            deptCounts[emp.department] = (deptCounts[emp.department] || 0) + 1;\n          }\n        });\n        this.departmentChart = new Chart(deptCtx, {\n          type: 'doughnut',\n          data: {\n            labels: Object.keys(deptCounts),\n            datasets: [{\n              data: Object.values(deptCounts),\n              backgroundColor: [\n                '#60a5fa', '#f59e42', '#34d399', '#f87171', '#a78bfa', '#fbbf24'\n              ]\n            }]\n          },\n          options: {\n            plugins: {\n              title: {\n                display: true,\n                text: 'Employees by Department'\n              }\n            }\n          }\n        });\n      }\n\n      if (salaryCtx && this.filteredEmployees.length) {\n        const salaryData = this.filteredEmployees.map(emp => emp.salary || 0);\n        const salaryLabels = this.filteredEmployees.map(emp => emp.name);\n        this.salaryChart = new Chart(salaryCtx, {\n          type: 'bar',\n          data: {\n            labels: salaryLabels,\n            datasets: [{\n              label: 'Salary',\n              data: salaryData,\n              backgroundColor: '#60a5fa'\n            }]\n          },\n          options: {\n            plugins: {\n              title: {\n                display: true,\n                text: 'Salary by Employee'\n              }\n            },\n            scales: {\n              y: {\n                beginAtZero: true,\n                ticks: {\n                  callback: value => 'R' + value.toLocaleString()\n                }\n              }\n            }\n          }\n        });\n      }\n    }\n  }\n};\n</script>\n\n<style scoped>\ncanvas {\n  max-width: 100%;\n  height: 300px !important;\n}\n</style>"],"mappings":";;EACOA,KAAK,EAAC,MAAM;EAACC,KAAyB,EAAzB;IAAA;EAAA;;;EAEXD,KAAK,EAAC;AAAK;;EAITA,KAAK,EAAC;AAA2B;;;;EAcWA,KAAK,EAAC;;;EAE3CE,GAAG,EAAC;AAAiB;;EAGrBA,GAAG,EAAC;AAAa;;;EAITF,KAAK,EAAC;;;;EACRA,KAAK,EAAC;;;;EAC0BA,KAAK,EAAC;;;uBA/B5DG,mBAAA,CAiCM,OAjCNC,UAiCM,G,0BAhCJC,mBAAA,CAAmF;IAA/EL,KAAK,EAAC;EAAgD,GAAC,qBAAmB,qBAC9EK,mBAAA,CA8BM,OA9BNC,UA8BM,G,0BA7BJD,mBAAA,CAAqF;IAAjFL,KAAK,EAAC;EAA2C,GAAC,4BAA0B,qBAEhFO,mBAAA,oBAAuB,EACvBF,mBAAA,CAWM,OAXNG,UAWM,G,gBAVJH,mBAAA,CAKE;+DAJSI,KAAA,CAAAC,MAAM,GAAAC,MAAA;IACfC,IAAI,EAAC,MAAM;IACXC,WAAW,EAAC,gBAAgB;IAC5Bb,KAAK,EAAC;iDAHGS,KAAA,CAAAC,MAAM,E,mBAKjBL,mBAAA,CAGS;+DAHQI,KAAA,CAAAK,UAAU,GAAAH,MAAA;IAAEX,KAAK,EAAC;gCACjCK,mBAAA,CAAyC;IAAjCU,KAAK,EAAC;EAAE,GAAC,iBAAe,sB,kBAChCZ,mBAAA,CAAiFa,SAAA,QAAAC,WAAA,CAA1DC,QAAA,CAAAC,WAAW,EAAnBC,IAAI;yBAAnBjB,mBAAA,CAAiF;MAA5CkB,GAAG,EAAED,IAAI;MAAGL,KAAK,EAAEK;wBAASA,IAAI,wBAAAE,UAAA;2EAFtDb,KAAA,CAAAK,UAAU,E,KAM7BP,mBAAA,mBAAsB,E,CACVE,KAAA,CAAAc,OAAO,IAAIL,QAAA,CAAAM,iBAAiB,CAACC,MAAM,I,cAA/CtB,mBAAA,CAOM,OAPNuB,UAOM,GANJrB,mBAAA,CAEM,cADJA,mBAAA,CAAuC,UAAvCsB,UAAuC,8B,GAEzCtB,mBAAA,CAEM,cADJA,mBAAA,CAAmC,UAAnCuB,UAAmC,8B,0CAI5BnB,KAAA,CAAAc,OAAO,I,cAAlBpB,mBAAA,CAA0D,OAA1D0B,UAA0D,EAAhB,YAAU,K,mCACzCpB,KAAA,CAAAqB,KAAK,I,cAAhB3B,mBAAA,CAA6D,OAA7D4B,UAA6D,EAAAC,gBAAA,CAAdvB,KAAA,CAAAqB,KAAK,oB,oCACxCrB,KAAA,CAAAc,OAAO,KAAKL,QAAA,CAAAM,iBAAiB,CAACC,MAAM,I,cAAhDtB,mBAAA,CAAiG,OAAjG8B,WAAiG,EAAzB,qBAAmB,K","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}