{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport \"core-js/modules/es.iterator.for-each.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport \"core-js/modules/es.set.difference.v2.js\";\nimport \"core-js/modules/es.set.intersection.v2.js\";\nimport \"core-js/modules/es.set.is-disjoint-from.v2.js\";\nimport \"core-js/modules/es.set.is-subset-of.v2.js\";\nimport \"core-js/modules/es.set.is-superset-of.v2.js\";\nimport \"core-js/modules/es.set.symmetric-difference.v2.js\";\nimport \"core-js/modules/es.set.union.v2.js\";\nimport Chart from 'chart.js/auto';\nexport default {\n  name: \"EmployeeDashboard\",\n  data() {\n    return {\n      employees: [],\n      loading: true,\n      error: null,\n      search: \"\",\n      department: \"\",\n      departmentChart: null,\n      salaryChart: null\n    };\n  },\n  computed: {\n    filteredEmployees() {\n      return this.employees.filter(emp => {\n        const matchesName = emp.name.toLowerCase().includes(this.search.toLowerCase());\n        const matchesDept = this.department ? emp.department === this.department : true;\n        return matchesName && matchesDept;\n      });\n    },\n    departments() {\n      const depts = this.employees.map(e => e.department).filter(Boolean);\n      return [...new Set(depts)];\n    }\n  },\n  watch: {\n    filteredEmployees() {\n      // Only render charts if not loading and there is data\n      if (!this.loading && this.filteredEmployees.length) {\n        this.$nextTick(() => {\n          this.renderCharts();\n        });\n      } else {\n        // Destroy charts if no data\n        if (this.departmentChart) {\n          this.departmentChart.destroy();\n          this.departmentChart = null;\n        }\n        if (this.salaryChart) {\n          this.salaryChart.destroy();\n          this.salaryChart = null;\n        }\n      }\n    }\n  },\n  mounted() {\n    fetch(\"https://zakariad007.github.io/employee/employee_info.json\").then(res => res.json()).then(data => {\n      this.employees = data.employeeInformation;\n      this.loading = false;\n      this.$nextTick(() => {\n        if (this.filteredEmployees.length) {\n          this.renderCharts();\n        }\n      });\n    }).catch(() => {\n      this.error = \"Failed to load employee data.\";\n      this.loading = false;\n    });\n  },\n  methods: {\n    renderCharts() {\n      // Destroy previous charts if they exist\n      if (this.departmentChart) {\n        this.departmentChart.destroy();\n        this.departmentChart = null;\n      }\n      if (this.salaryChart) {\n        this.salaryChart.destroy();\n        this.salaryChart = null;\n      }\n\n      // Use refs instead of getElementById\n      const deptCtx = this.$refs.departmentChart;\n      const salaryCtx = this.$refs.salaryChart;\n\n      // Only render if refs exist and there is data\n      if (deptCtx && this.filteredEmployees.length) {\n        const deptCounts = {};\n        this.filteredEmployees.forEach(emp => {\n          if (emp.department) {\n            deptCounts[emp.department] = (deptCounts[emp.department] || 0) + 1;\n          }\n        });\n        this.departmentChart = new Chart(deptCtx, {\n          type: 'doughnut',\n          data: {\n            labels: Object.keys(deptCounts),\n            datasets: [{\n              data: Object.values(deptCounts),\n              backgroundColor: ['#60a5fa', '#f59e42', '#34d399', '#f87171', '#a78bfa', '#fbbf24']\n            }]\n          },\n          options: {\n            plugins: {\n              title: {\n                display: true,\n                text: 'Employees by Department'\n              }\n            }\n          }\n        });\n      }\n      if (salaryCtx && this.filteredEmployees.length) {\n        const salaryData = this.filteredEmployees.map(emp => emp.salary || 0);\n        const salaryLabels = this.filteredEmployees.map(emp => emp.name);\n        this.salaryChart = new Chart(salaryCtx, {\n          type: 'bar',\n          data: {\n            labels: salaryLabels,\n            datasets: [{\n              label: 'Salary',\n              data: salaryData,\n              backgroundColor: '#60a5fa'\n            }]\n          },\n          options: {\n            plugins: {\n              title: {\n                display: true,\n                text: 'Salary by Employee'\n              }\n            },\n            scales: {\n              y: {\n                beginAtZero: true,\n                ticks: {\n                  callback: value => 'R' + value.toLocaleString()\n                }\n              }\n            }\n          }\n        });\n      }\n    }\n  }\n};","map":{"version":3,"names":["Chart","name","data","employees","loading","error","search","department","departmentChart","salaryChart","computed","filteredEmployees","filter","emp","matchesName","toLowerCase","includes","matchesDept","departments","depts","map","e","Boolean","Set","watch","length","$nextTick","renderCharts","destroy","mounted","fetch","then","res","json","employeeInformation","catch","methods","deptCtx","$refs","salaryCtx","deptCounts","forEach","type","labels","Object","keys","datasets","values","backgroundColor","options","plugins","title","display","text","salaryData","salary","salaryLabels","label","scales","y","beginAtZero","ticks","callback","value","toLocaleString"],"sources":["C:\\Users\\Student\\Documents\\Exercises\\Workshop\\Vue\\hr_system\\src\\views\\DashboardView.vue"],"sourcesContent":["<template>\n  <div class=\"py-8\" style=\"margin-left:30px;\">\n    <h1 class=\"text-2xl font-semibold text-gray-900 text-left\">Good afternoon, Tom</h1>\n    <div class=\"p-8\">\n      <h1 class=\"text-2xl font-semibold text-gray-900 mb-6\">Employee Details Dashboard</h1>\n\n      <!-- Filter Section -->\n      <div class=\"mb-6 flex flex-wrap gap-4\">\n        <input\n          v-model=\"search\"\n          type=\"text\"\n          placeholder=\"Search by name\"\n          class=\"border px-3 py-2 rounded shadow-sm\"\n        />\n        <select v-model=\"department\" class=\"border px-3 py-2 rounded shadow-sm\">\n          <option value=\"\">All Departments</option>\n          <option v-for=\"dept in departments\" :key=\"dept\" :value=\"dept\">{{ dept }}</option>\n        </select>\n      </div>\n\n      <!-- Graph Section -->\n      <div v-if=\"!loading && filteredEmployees.length\" class=\"mb-8 grid grid-cols-1 md:grid-cols-2 gap-8\">\n        <div>\n          <canvas ref=\"departmentChart\"></canvas>\n        </div>\n        <div>\n          <canvas ref=\"salaryChart\"></canvas>\n        </div>\n      </div>\n\n      <div v-if=\"loading\" class=\"text-gray-500\">Loading...</div>\n      <div v-if=\"error\" class=\"text-red-500 mt-4\">{{ error }}</div>\n      <div v-if=\"!loading && !filteredEmployees.length\" class=\"text-gray-500\">No data to display.</div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport Chart from 'chart.js/auto';\n\nexport default {\n  name: \"EmployeeDashboard\",\n  data() {\n    return {\n      employees: [],\n      loading: true,\n      error: null,\n      search: \"\",\n      department: \"\",\n      departmentChart: null,\n      salaryChart: null\n    };\n  },\n  computed: {\n    filteredEmployees() {\n      return this.employees.filter(emp => {\n        const matchesName = emp.name.toLowerCase().includes(this.search.toLowerCase());\n        const matchesDept = this.department ? emp.department === this.department : true;\n        return matchesName && matchesDept;\n      });\n    },\n    departments() {\n      const depts = this.employees.map(e => e.department).filter(Boolean);\n      return [...new Set(depts)];\n    }\n  },\n  watch: {\n    filteredEmployees() {\n      // Only render charts if not loading and there is data\n      if (!this.loading && this.filteredEmployees.length) {\n        this.$nextTick(() => {\n          this.renderCharts();\n        });\n      } else {\n        // Destroy charts if no data\n        if (this.departmentChart) {\n          this.departmentChart.destroy();\n          this.departmentChart = null;\n        }\n        if (this.salaryChart) {\n          this.salaryChart.destroy();\n          this.salaryChart = null;\n        }\n      }\n    }\n  },\n  mounted() {\n    fetch(\"https://zakariad007.github.io/employee/employee_info.json\")\n      .then(res => res.json())\n      .then(data => {\n        this.employees = data.employeeInformation;\n        this.loading = false;\n        this.$nextTick(() => {\n          if (this.filteredEmployees.length) {\n            this.renderCharts();\n          }\n        });\n      })\n      .catch(() => {\n        this.error = \"Failed to load employee data.\";\n        this.loading = false;\n      });\n  },\n  methods: {\n    renderCharts() {\n      // Destroy previous charts if they exist\n      if (this.departmentChart) {\n        this.departmentChart.destroy();\n        this.departmentChart = null;\n      }\n      if (this.salaryChart) {\n        this.salaryChart.destroy();\n        this.salaryChart = null;\n      }\n\n      // Use refs instead of getElementById\n      const deptCtx = this.$refs.departmentChart;\n      const salaryCtx = this.$refs.salaryChart;\n\n      // Only render if refs exist and there is data\n      if (deptCtx && this.filteredEmployees.length) {\n        const deptCounts = {};\n        this.filteredEmployees.forEach(emp => {\n          if (emp.department) {\n            deptCounts[emp.department] = (deptCounts[emp.department] || 0) + 1;\n          }\n        });\n        this.departmentChart = new Chart(deptCtx, {\n          type: 'doughnut',\n          data: {\n            labels: Object.keys(deptCounts),\n            datasets: [{\n              data: Object.values(deptCounts),\n              backgroundColor: [\n                '#60a5fa', '#f59e42', '#34d399', '#f87171', '#a78bfa', '#fbbf24'\n              ]\n            }]\n          },\n          options: {\n            plugins: {\n              title: {\n                display: true,\n                text: 'Employees by Department'\n              }\n            }\n          }\n        });\n      }\n\n      if (salaryCtx && this.filteredEmployees.length) {\n        const salaryData = this.filteredEmployees.map(emp => emp.salary || 0);\n        const salaryLabels = this.filteredEmployees.map(emp => emp.name);\n        this.salaryChart = new Chart(salaryCtx, {\n          type: 'bar',\n          data: {\n            labels: salaryLabels,\n            datasets: [{\n              label: 'Salary',\n              data: salaryData,\n              backgroundColor: '#60a5fa'\n            }]\n          },\n          options: {\n            plugins: {\n              title: {\n                display: true,\n                text: 'Salary by Employee'\n              }\n            },\n            scales: {\n              y: {\n                beginAtZero: true,\n                ticks: {\n                  callback: value => 'R' + value.toLocaleString()\n                }\n              }\n            }\n          }\n        });\n      }\n    }\n  }\n};\n</script>\n\n<style scoped>\ncanvas {\n  max-width: 100%;\n  height: 300px !important;\n}\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}